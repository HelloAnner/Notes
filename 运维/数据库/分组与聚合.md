### 1. 聚合函数

聚合函数包括**COUNT、SUM、AVG、MIN、MAX**。聚合函数根据规则把多行结果输出为一行结果

-   `COUNT`：统计查询结果的个数，`COUNT(*)`统计结果个数包含NULL，`COUNT(列名)`，统计结果不包含该列NULL值。
-   `SUM`：查询结果的累加和，只能应用于数值类型，会自动过滤掉NULL值，输出累加和。
-   `AVG`: 计算查询结果的平均值，只能应用于数值类型，自动过滤NULL值，输出平均值。
-   `MIN`:计算查询结果的最小值，几乎能应用在所有数据类型上，如果是数值输出最小值，如果是字符按字典顺序输出最小字符，如果是时间输出最久时间。
-   `MAX`:计算查询结果的最大值，和`MIN`输出结果相反

聚合函数还能和DISTINCT联合使用，用于计算去除重复行的结果，如SUM(DISTINCT 列名)

### 2. 分组

GROUP BY 列名、列名...，根据列名进行组合分组，分组列结果值相同的会被分为一组。如果分组列结果包含NULL，则NULL值单独作为一组

如果有GROUP BY的组合列有多个，要所有分组列的结果值均相同才会被合并成一组

```sql
select dep,max(score) from user group by dep;
```
==`SELECT`后查询列必须要在`GROUP BY`的分组列中存在==，原因和聚集函数一样

假设能输出结果，结果如下，按照`GROUP BY`分组，衣服和厨房用具只会出现一组，但是由于product_name有多个查询结果都要显示，相同类型的显示了多行，显然矛盾，所以一定会报错

  

-   聚合函数不能作为GROUP BY的分组列，聚合函数是计算查询列中所有结果的值，有且只有一个，根据聚合值分组毫无意义
-   聚合函数不能作为WHERE的查询条件，聚合函数的结果是所有查询结果的值，因此需要查询的列永远不会符合查询条件，不会返回任何结果

### 3 having

-   WHERE条件作用于筛选行
-   HAVING筛选条件用于筛选组